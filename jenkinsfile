pipeline {
    agent any
    environment {
        ALL_CREDS = "AAA"
    }
    triggers {
        cron('H */8 * * 1-5')
    }
    options {
        buildDiscarder(logRotator(daysToKeepStr: '3', numToKeepStr: '3'))
        timeout(time: 20, unit: 'MINUTES')
    }
    stages {
        stage("Build") {
            steps {
                sh 'set +x && echo "Баклажаны Рвут"'
            }
        }
        stage("if") {
            steps {
                sh '''
                set +x
                if [ 1 -eq 2 ]; then
                    echo "eq"
                elif [ 1 -eq 3 ]; then
                    echo "eq 2"
                else
                    echo "not eq"
                fi
                '''
            }
        }
        stage("for") {
            steps {
                sh '''
                set +x
                for i in 1 2 3 4 5; do
                    echo "значение ${i}"
                done
                '''
            }
        }
        stage("checkout git") {
            steps {
                sh '''
                set +x
                git clone https://github.com/elestopadov/jenkins-example-app.git
                ls -la
                '''
            }
        }
        stage("envs") {
            steps {
                sh 'set +x && echo "${SERVICE_CREDS}"'
                sh 'set +x && echo "$ALL_CREDS"'
            }
        }
    }
}
